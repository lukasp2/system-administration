This is the first step you will have to finish in this course. Without it, you will not have access to the internet and therefore no way of downloading the scripts and files needed to finish the other steps.

1.1. setting the hostnames
For each machine, go to /etc/hostname and set the hostname of the respecitve machine.
router: gw
server: server
clients: client-1 and client-2

1.2. Go to /etc/hosts and set the address, FQDN, and hostname on all your hosts.
This is what the file should look like on every machine:
127.0.0.1  localhost
10.0.0.1   gw.example.com         gw
10.0.0.2   server.example.com     server
10.0.0.3   client-1.example.com   client-1
10.0.0.4   client-2.example.com   client-2

1.3. Reboot system and check hostname with the command "hostname"

2. basic network connectivity
network configuration is in /etc/network/interfaces. There is a man page de-scribing the file format.

Your router needs three network interfaces:
- the loopback interface (lo; which is used for network connections within the gateway), 
- the interface connected to the distribution network (eth0)
- the interface connected to your network (eth1). 

you may have different names (not eth0, eth1, lo), check by running:
$ ip address.

2.1. Go to the router and write the following in the file /etc/network/interfaces:
auto lo
iface lo inet loopback

allow-hotplug ens3
auto ens3
iface ens3 inet dhcp

auto ens4
iface ens4 inet static
 
address 10.0.0.1
netmask 255.0.0.0
broadcast 10.255.255.255
network 10.0.0.0

2.2. After interface config:
1. Use ifup on the interfaces so that they can all be used:
$ ifup ens3; ifup ens4

2.3. Use "ip" to verify your configuration. Command should show all interfaces.
$ ip addr

2.4. Type this into the clients and servers /etc/network/interfaces:
auto lo
iface lo inet loopback

allow-hotplug ens3
auto ens3
iface ens3 inet static

address 10.0.0.1 (for server, and address 10.0.0.3,4 for client-1 and 2)
netmask 255.0.0.0
broadcast 10.255.255.255
network 10.0.0.0
gateway 10.0.0.1

2.5. Reboot and make sure you can ping 10.0.0.1 (the router).

3. Resolver: Type this into /etc/resolv.conf on the server
/etc/resolv.conf
<server>
domain.ida.liu.se
nameserver 130.236.1.9
nameserver 130.236.1.10
nameserver 130.236.1.11

4.1. NAT: run the following commands
echo "1" > /proc/sys/net/ipv4/ip_forward

apt-get install iptables-persistent

/sbin/iptables -t nat -A POSTROUTING -o ens -j MASQUERADE
/sbin/iptables -A FORWARD -i ens3 -o ens4 -m state --state RELATED,ESTABLISHED -j ACCEPT
/sbin/iptables -A FORWARD -i ens4 -o ens3 -j ACCEPT

dhclient ens3 -v

4.2 Edit /etc/sysctl.conf and change the line net.ipv4.ip_forward = 0 to net.ipv4.ip_forward = 1. 

.. you should now be able to curl www.google.com from all machines

5. Getting Git
apt-get install git
git clone <this repo>

.. done.



